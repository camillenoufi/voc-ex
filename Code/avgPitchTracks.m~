cd '/usr/ccrma/media/projects/jordan/Experiments/VocEx1.1/Code';
addpath('./helper_funcs/')

files = dir(fullfile('/usr/ccrma/media/projects/jordan/Datasets/DAMP-AG/wav_top/wav/d001','*.csv'));
%%

path = fullfile(files(1).folder,files(1).name);
sum_pitchtrack = csvread(path,1,0);
len = size(sum_pitchtrack,1);
sum_pitchtrack = zeros(len,3);
sum_pc = zeros(len,1);
%%
for i=1:10
    path = fullfile(files(i).folder,files(i).name);
    this_pitchtrack = csvread(path,1,0);
    this_len = size(this_pitchtrack,1);
    f = this_pitchtrack(:,2);
    m = 12*log2(f/440) + 69 - 3; %adjust to Eb being 0 in PC
    cents_off = m - round(m);
    pc
    pc_cents = mod(m,12) + cents_off;
    if this_len<len
        len = this_len;
        sum_pitchtrack = sum_pitchtrack(1:len,:) + this_pitchtrack;
        sum_pc = sum_pc(1:len) + pc_cents;
    else
        sum_pitchtrack = sum_pitchtrack + this_pitchtrack(1:len,:);
        sum_pc = sum_pc + pc_cents(1:len);
    end
end

sum_pitchtrack = [sum_pitchtrack, sum_pc];
sum_pitchtrack = sum_pitchtrack/i;
